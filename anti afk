wait(0.5)

-- GUI elements
local ba = Instance.new("ScreenGui")
local ca = Instance.new("Frame") -- draggable frame
local title = Instance.new("TextLabel")
local da = Instance.new("Frame")
local _b = Instance.new("TextLabel")
local ab = Instance.new("TextLabel")
local timerLabel = Instance.new("TextLabel")
local fpsLabel = Instance.new("TextLabel")

ba.Parent = game.CoreGui
ba.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Title bar
ca.Parent = ba
ca.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ca.Position = UDim2.new(0.7, 0, 0.1, 0)
ca.Size = UDim2.new(0, 370, 0, 52)

-- Title text
title.Parent = ca
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, 0, 1, 0)
title.Font = Enum.Font.SourceSansSemibold
title.Text = "Anti AFK & FPS Monitor"
title.TextColor3 = Color3.fromRGB(0, 255, 255)
title.TextSize = 22

-- Main frame
da.Parent = ca
da.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
da.Position = UDim2.new(0, 0, 1, 0)
da.Size = UDim2.new(0, 370, 0, 180)

-- Footer
_b.Parent = da
_b.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
_b.Position = UDim2.new(0, 0, 0.8, 0)
_b.Size = UDim2.new(0, 370, 0, 21)
_b.Font = Enum.Font.Arial
_b.Text = "made by tradesland"
_b.TextColor3 = Color3.fromRGB(0, 255, 255)
_b.TextSize = 20

-- Status label
ab.Parent = da
ab.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ab.Position = UDim2.new(0, 0, 0.15, 0)
ab.Size = UDim2.new(0, 370, 0, 44)
ab.Font = Enum.Font.ArialBold
ab.Text = "Status: Active"
ab.TextColor3 = Color3.fromRGB(0, 255, 255)
ab.TextSize = 20

-- Timer label
timerLabel.Parent = da
timerLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
timerLabel.Position = UDim2.new(0, 0, 0.4, 0)
timerLabel.Size = UDim2.new(0, 370, 0, 30)
timerLabel.Font = Enum.Font.Arial
timerLabel.Text = "Time Elapsed: 00:00"
timerLabel.TextColor3 = Color3.fromRGB(0, 255, 255)
timerLabel.TextSize = 18

-- FPS label
fpsLabel.Parent = da
fpsLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
fpsLabel.Position = UDim2.new(0, 0, 0.6, 0)
fpsLabel.Size = UDim2.new(0, 370, 0, 30)
fpsLabel.Font = Enum.Font.Arial
fpsLabel.Text = "FPS: 0"
fpsLabel.TextColor3 = Color3.fromRGB(0, 255, 255)
fpsLabel.TextSize = 18

-- Anti-AFK
local VirtualUser = game:GetService("VirtualUser")
local Players = game:GetService("Players")

Players.LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
    ab.Text = "ghostyshadowAFK Start"
    wait(2)
    ab.Text = "Status: Active"
end)

-- Timer logic
local startTime = tick()
task.spawn(function()
    while true do
        local elapsed = math.floor(tick() - startTime)
        local minutes = math.floor(elapsed / 60)
        local seconds = elapsed % 60
        timerLabel.Text = string.format("Time Elapsed: %02d:%02d", minutes, seconds)
        wait(1)
    end
end)

-- FPS calculation variables
local fps = 0
local frameCount = 0
local lastTime = tick()

-- Color coding for FPS
local function getFPSColor(fpsValue)
    if fpsValue >= 60 then
        return Color3.fromRGB(85, 255, 85) -- Green for good FPS
    elseif fpsValue >= 30 then
        return Color3.fromRGB(255, 255, 85) -- Yellow for okay FPS
    else
        return Color3.fromRGB(255, 85, 85) -- Red for bad FPS
    end
end

-- Update FPS counter
game:GetService("RunService").Heartbeat:Connect(function()
    frameCount = frameCount + 1
    local currentTime = tick()
    
    if currentTime - lastTime >= 1 then
        fps = frameCount
        frameCount = 0
        lastTime = currentTime
        
        -- Update the FPS display
        fpsLabel.Text = "FPS: " .. fps
        fpsLabel.TextColor3 = getFPSColor(fps)
    end
end)

-- Dragging system
local UserInputService = game:GetService("UserInputService")
local gui = ca
local dragging, dragStart, startPos

gui.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = gui.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)













local Rayfield = nil
local success, err = pcall(function()
    Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield', true))()
end)

-- Notify the user if Rayfield failed to load
if not success then
    warn("Rayfield Load Error: " .. tostring(err))
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Rayfield Error",
        Text = "Failed to load Rayfield. Please check your executor or internet connection.",
        Duration = 10
    })
    return
end

-- Create the main window configuration
local Window = Rayfield:CreateWindow({
    Name = "AWS EGG",
    LoadingTitle = "ARM Wrestle Simulator",
    LoadingSubtitle = "by Anonymous",
    ConfigurationSaving = {
        Enabled = false,
        FileName = "Rayfield"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = false
})

-- Hatch Configuration Section
local hatchConfig = {
    MaxHatch = true -- 30x Max Hatch - Set to true by default
}

local ConfigTab = Window:CreateTab("Hatch Settings")
ConfigTab:CreateSection("Hatch Multipliers")

ConfigTab:CreateToggle({
    Name = "30x Max Hatch",
    CurrentValue = true, -- Set to true by default
    Callback = function(Value)
        hatchConfig.MaxHatch = Value
    end
})

-- Egg Automation Section
local EggTab = Window:CreateTab("Egg Automation")
EggTab:CreateSection("Available Eggs")
EggTab:CreateParagraph({
    Title = "Important Notes",
    Content = "Enjoy the script. Toggle states apply to all eggs. Firework2026 egg will auto-hatch at max."
})

local eggDatabase = { 
    "Firework2026",
    -- Add new egg names here
}

-- Function to handle egg hatching
local function hatchEgg(eggName, hatchConfig)
    local args = {
        [1] = eggName,       -- Egg name
        [2] = nil,          -- Unknown argument
        [3] = nil,          -- Triple Egg (gamepass)
        [4] = false,        -- Auto Egg (gamepass)
        [5] = nil,          -- Added missing index [5]
        [6] = hatchConfig.MaxHatch  -- 30x Max Hatch
    }
    game:GetService("ReplicatedStorage").Packages.Knit.Services.EggService.RF.purchaseEgg:InvokeServer(unpack(args))
end

-- Create toggles for each egg
-- Fixed: Used a table to track toggle states to avoid closure issues
local toggleStates = {}

for _, eggName in ipairs(eggDatabase) do
    toggleStates[eggName] = false
    
    EggTab:CreateToggle({
        Name = eggName,
        CurrentValue = (eggName == "Firework2026"), -- Set to true for Firework2026
        Callback = function(Value)
            toggleStates[eggName] = Value
            
            -- Fixed: Use a coroutine to prevent blocking the main thread
            if Value then
                spawn(function()
                    while toggleStates[eggName] do
                        hatchEgg(eggName, hatchConfig)
                        task.wait() -- Increased delay to prevent potential rate limiting
                    end
                end)
            end
        end
    })
end

-- Automatically start hatching Firework2026 egg at max hatch
spawn(function()
    -- Set the toggle state to true
    toggleStates["Firework2026"] = true
    
    -- Start the hatching loop
    while toggleStates["Firework2026"] do
        hatchEgg("Firework2026", hatchConfig)
        task.wait() -- Small delay to prevent spamming
    end
end)

-- Notification to user
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Auto-Hatch Started",
    Text = "Firework2026 egg is now being hatched at max hatch.",
    Duration = 5
})